{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>ðŸ“„ All Applications</h3>
  <a href="{{ url_for('admin_logout') }}" class="btn btn-outline-danger btn-sm">Logout</a>
</div>

<div class="table-responsive">
<table class="table table-striped table-bordered align-middle">
  <thead class="table-light">
    <tr>
      <th>App ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
      <th>City</th>
      <th>Submitted</th>
      <th>Status</th>
      <th>Resume</th>
      <th>Update</th>
    </tr>
  </thead>
  <tbody>
  {% for a in applications %}
    <tr>
      <td>{{ a['app_id'] }}</td>
      <td>{{ a['first_name'] }} {{ a['last_name'] }}</td>
      <td>{{ a['email'] }}</td>
      <td>{{ a['job_role'] }}</td>
      <td>{{ a['city'] }}</td>
      <td>{{ a['created_at'] }}</td>
      <td><span class="badge bg-secondary">{{ a['status'] }}</span></td>
      <td>
        {% if a['resume_filename'] %}
          <a href="{{ url_for('uploads', filename=a['resume_filename']) }}" target="_blank">Download</a>
        {% else %}â€”{% endif %}
      </td>
      <td>
        <form method="post" class="d-flex gap-2">
          <input type="hidden" name="app_id" value="{{ a['app_id'] }}">
          <select class="form-select form-select-sm" name="status">
            {% for s in ["Submitted","Under Review","Shortlisted","Interview Scheduled","Rejected","Selected"] %}
            <option value="{{ s }}" {% if s == a['status'] %}selected{% endif %}>{{ s }}</option>
            {% endfor %}
          </select>
          <button class="btn btn-sm btn-primary">Save</button>
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}
